# ðŸ—ï¸ AI Studio Infrastructure Documentation

**Complete Infrastructure, Database, Deployment, and Architecture Overview**

---

## âš ï¸ CRITICAL SYSTEM WARNINGS - READ FIRST

### ðŸš¨ DO NOT TOUCH WITHOUT READING
1. **HTML Structure is LOCKED** - Generated by Webflow, cannot be modified
2. **Animations are HARDCODED** - Change any data-w-id and animations break
3. **Translation System is TEXT-BASED** - Finds buttons by "Sign Up Today" text
4. **Database is WIDE-TABLE** - 123+ columns, anti-pattern but working
5. **Rebuilding = 6-8 MONTHS** - Due to Webflow lock-in and dependencies

### ðŸ”’ Vendor Lock-In Reality
- **Webflow**: Complete HTML/CSS/Animation lock-in
- **Text Matching**: JavaScript finds elements by English text content
- **Wide Tables**: Database structure tightly coupled to frontend
- **Hebrew Override**: Hack to prevent API from breaking Hebrew translations

---

## ðŸŒŸ Executive Summary

AI Studio is a **Webflow-generated static site with custom backend**:
- **Frontend**: Webflow-exported HTML with locked animations and structure
- **Backend**: Custom Express.js server with RESTful API
- **Database**: PostgreSQL with 123+ column wide tables (anti-pattern)
- **Translation**: Text-matching system that finds elements by content
- **Deployment**: Railway Platform (Production) / Local PostgreSQL (Development)
- **Admin Panel**: Custom-built for content management (215+ fields)

> **âš ï¸ REALITY CHECK**: While technically "custom", the system is heavily constrained by Webflow-generated HTML that cannot be regenerated without losing all customizations.

---

## ðŸš€ Live Production URLs

### ðŸŒ Frontend (Multi-Language Sites)
```
ðŸ‡¬ðŸ‡§ English:  https://aistudio555jamstack-production.up.railway.app/dist/en/
ðŸ‡·ðŸ‡º Russian:  https://aistudio555jamstack-production.up.railway.app/dist/ru/
ðŸ‡®ðŸ‡± Hebrew:   https://aistudio555jamstack-production.up.railway.app/dist/he/

Main Domain:   https://www.aistudio555.com/
```

### ðŸ”§ Admin Panel URLs (Custom-Built)
```
Comprehensive: https://aistudio555jamstack-production.up.railway.app/content-admin-comprehensive.html
Standard:      https://aistudio555jamstack-production.up.railway.app/content-admin.html  
Basic:         https://aistudio555jamstack-production.up.railway.app/content-admin-basic.html
```

### ðŸ”Œ API Endpoints (Custom REST API)
```
Status:        https://aistudio555jamstack-production.up.railway.app/api/status
Home Page:     https://aistudio555jamstack-production.up.railway.app/api/home-page?locale=en
Courses:       https://aistudio555jamstack-production.up.railway.app/api/courses?locale=ru
Teachers:      https://aistudio555jamstack-production.up.railway.app/api/teachers?locale=he
Blog Posts:    https://aistudio555jamstack-production.up.railway.app/api/blog-posts?locale=en
Career Center: https://aistudio555jamstack-production.up.railway.app/api/career-center-page
Seed DB:       https://aistudio555jamstack-production.up.railway.app/api/seed-database
```
TETST: http://localhost:9090/run-admin-tests.html

---

## ðŸ—ƒï¸ Database Architecture

### ðŸ˜ Database Configuration

#### Production (Railway PostgreSQL)
```yaml
Provider: Railway PostgreSQL
Region: US-West (Auto-selected)
Version: PostgreSQL 13+
SSL: Required
Connection: Via DATABASE_URL environment variable
Backup: Automatic daily backups by Railway
```

#### Local Development (PostgreSQL 16)
```yaml
Provider: Local PostgreSQL (Homebrew)
Version: PostgreSQL 16
Port: 5432
Database: aistudio_db
Username: postgres
Password: postgres
Connection: postgresql://postgres:postgres@localhost:5432/aistudio_db
Setup: See /Docs/architecture/db/localDB.md
```

**Local Setup Instructions**: See `/Docs/architecture/db/localDB.md` for complete local database configuration.

### ðŸ“Š Database Schema (Wide-Table Anti-Pattern)

> **âš ï¸ WARNING**: This database uses a wide-table approach with 123+ columns in home_pages table. This is an anti-pattern but changing it would require rewriting all JavaScript integration code.

#### Core Tables
```sql
-- Home Pages (123+ fields per language)
CREATE TABLE home_pages (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',  -- 'en', 'ru', 'he'
  
  -- Basic Info
  title VARCHAR(255),
  hero_title VARCHAR(255),
  hero_subtitle VARCHAR(255),
  hero_description TEXT,
  hero_section_visible BOOLEAN DEFAULT true,
  
  -- Featured Courses Section (3 courses)
  featured_courses_title VARCHAR(255),
  featured_courses_description TEXT,
  featured_courses_visible BOOLEAN DEFAULT true,
  
  course_1_title VARCHAR(255),
  course_1_rating VARCHAR(10),
  course_1_lessons VARCHAR(50),
  course_1_duration VARCHAR(50),
  course_1_category VARCHAR(100),
  course_1_visible BOOLEAN DEFAULT true,
  
  course_2_title VARCHAR(255),
  course_2_rating VARCHAR(10),
  course_2_lessons VARCHAR(50),
  course_2_duration VARCHAR(50),
  course_2_category VARCHAR(100),
  course_2_visible BOOLEAN DEFAULT true,
  
  course_3_title VARCHAR(255),
  course_3_rating VARCHAR(10),
  course_3_lessons VARCHAR(50),
  course_3_duration VARCHAR(50),
  course_3_category VARCHAR(100),
  course_3_visible BOOLEAN DEFAULT true,
  
  -- About Section
  about_title VARCHAR(255),
  about_subtitle VARCHAR(255),
  about_description TEXT,
  about_visible BOOLEAN DEFAULT true,
  
  -- Companies Section
  companies_title VARCHAR(255),
  companies_description TEXT,
  companies_visible BOOLEAN DEFAULT true,
  
  -- Testimonials Section (4 testimonials)
  testimonials_title VARCHAR(255),
  testimonials_subtitle VARCHAR(255),
  testimonials_visible BOOLEAN DEFAULT true,
  
  testimonial_1_text TEXT,
  testimonial_1_author VARCHAR(255),
  testimonial_1_rating VARCHAR(10),
  testimonial_1_visible BOOLEAN DEFAULT true,
  
  testimonial_2_text TEXT,
  testimonial_2_author VARCHAR(255),
  testimonial_2_rating VARCHAR(10),
  testimonial_2_visible BOOLEAN DEFAULT true,
  
  testimonial_3_text TEXT,
  testimonial_3_author VARCHAR(255),
  testimonial_3_rating VARCHAR(10),
  testimonial_3_visible BOOLEAN DEFAULT true,
  
  testimonial_4_text TEXT,
  testimonial_4_author VARCHAR(255),
  testimonial_4_rating VARCHAR(10),
  testimonial_4_visible BOOLEAN DEFAULT true,
  
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Courses (with multi-language support)
CREATE TABLE courses (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',
  title VARCHAR(255),
  description TEXT,
  price DECIMAL(10,2),
  duration VARCHAR(100),
  lessons INTEGER,
  rating DECIMAL(3,2),
  level VARCHAR(50),
  category VARCHAR(100),
  instructor_name VARCHAR(255),
  visible BOOLEAN DEFAULT true,
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Blog Posts
CREATE TABLE blog_posts (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',
  title VARCHAR(255),
  slug VARCHAR(255),
  excerpt TEXT,
  content TEXT,
  featured_image VARCHAR(255),
  author VARCHAR(255),
  visible BOOLEAN DEFAULT true,
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Teachers
CREATE TABLE teachers (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',
  name VARCHAR(255),
  role VARCHAR(255),
  bio TEXT,
  image VARCHAR(255),
  expertise TEXT,
  linkedin VARCHAR(255),
  twitter VARCHAR(255),
  display_order INTEGER DEFAULT 1,
  visible BOOLEAN DEFAULT true,
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- FAQs
CREATE TABLE faqs (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',
  question TEXT,
  answer TEXT,
  category VARCHAR(100),
  display_order INTEGER DEFAULT 1,
  visible BOOLEAN DEFAULT true,
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- About Pages
CREATE TABLE about_pages (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',
  title VARCHAR(255),
  hero_title VARCHAR(255),
  hero_subtitle VARCHAR(255),
  mission_title VARCHAR(255),
  mission_description TEXT,
  vision_title VARCHAR(255),
  vision_description TEXT,
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Contact Pages
CREATE TABLE contact_pages (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',
  title VARCHAR(255),
  description TEXT,
  address TEXT,
  phone VARCHAR(50),
  email VARCHAR(255),
  office_hours TEXT,
  map_url VARCHAR(500),
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Career Resources
CREATE TABLE career_resources (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',
  title VARCHAR(255),
  description TEXT,
  type VARCHAR(100),
  download_url VARCHAR(500),
  display_order INTEGER DEFAULT 1,
  visible BOOLEAN DEFAULT true,
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Career Orientation Page (215+ fields)
CREATE TABLE career_orientation_pages (
  id SERIAL PRIMARY KEY,
  locale VARCHAR(5) DEFAULT 'en',
  
  -- Hero Section (comprehensive)
  hero_main_title VARCHAR(255),
  hero_subtitle VARCHAR(255),
  hero_description TEXT,
  hero_stat_1_value VARCHAR(50),
  hero_stat_1_label VARCHAR(100),
  hero_stat_2_value VARCHAR(50),
  hero_stat_2_label VARCHAR(100),
  hero_cta_text VARCHAR(100),
  hero_cta_url VARCHAR(255),
  hero_visible BOOLEAN DEFAULT true,
  
  -- Problems Section
  problems_title VARCHAR(255),
  problems_subtitle VARCHAR(255),
  problems_description TEXT,
  problem_1_title VARCHAR(255),
  problem_1_description TEXT,
  problem_2_title VARCHAR(255),
  problem_2_description TEXT,
  problem_3_title VARCHAR(255),
  problem_3_description TEXT,
  problems_visible BOOLEAN DEFAULT true,
  
  -- Solutions Section  
  solutions_title VARCHAR(255),
  solutions_subtitle VARCHAR(255),
  solutions_description TEXT,
  solution_1_title VARCHAR(255),
  solution_1_description TEXT,
  solution_2_title VARCHAR(255),
  solution_2_description TEXT,
  solution_3_title VARCHAR(255),
  solution_3_description TEXT,
  solutions_visible BOOLEAN DEFAULT true,
  
  -- Career Paths Section
  career_paths_title VARCHAR(255),
  career_paths_description TEXT,
  career_path_1_title VARCHAR(255),
  career_path_1_description TEXT,
  career_path_1_salary VARCHAR(100),
  career_path_2_title VARCHAR(255),
  career_path_2_description TEXT,
  career_path_2_salary VARCHAR(100),
  career_path_3_title VARCHAR(255),
  career_path_3_description TEXT,
  career_path_3_salary VARCHAR(100),
  career_paths_visible BOOLEAN DEFAULT true,
  
  -- Process Section
  process_title VARCHAR(255),
  process_description TEXT,
  process_step_1_title VARCHAR(255),
  process_step_1_description TEXT,
  process_step_2_title VARCHAR(255),
  process_step_2_description TEXT,
  process_step_3_title VARCHAR(255),
  process_step_3_description TEXT,
  process_step_4_title VARCHAR(255),
  process_step_4_description TEXT,
  process_visible BOOLEAN DEFAULT true,
  
  -- Success Stories
  success_stories_title VARCHAR(255),
  success_story_1_name VARCHAR(255),
  success_story_1_title VARCHAR(255),
  success_story_1_story TEXT,
  success_story_2_name VARCHAR(255),
  success_story_2_title VARCHAR(255),
  success_story_2_story TEXT,
  
  published_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

---

## ðŸ”§ Server Architecture

### ðŸ–¥ï¸ Core Server Configuration (`server.js`)
```javascript
Platform: Node.js + Express.js
Port: 8080 (Production) / 3000 (Development)  
Database: Railway PostgreSQL with SQLite fallback
Static Files: Served from root directory
Middleware: CORS, JSON parsing, Static file serving

Key Features:
âœ… 100% Custom RESTful API (NO third-party CMS)
âœ… Multi-language endpoints with ?locale parameter
âœ… Automatic locale fallback (ru/he â†’ en if not found)
âœ… Custom response format for frontend compatibility
âœ… Database migration from SQLite to PostgreSQL
âœ… Auto-seeding with multi-language content
âœ… Language-specific static file routing
```

### ðŸŒ API Architecture (Custom Implementation)

#### Locale Detection System
```javascript
// Multi-layered locale detection
function getLocale(req) {
  const locale = req.query.locale ||        // ?locale=ru
                 req.params.locale ||       // /api/ru/courses  
                 req.headers['accept-language']?.split('-')[0] || 
                 'en';
  
  const validLocales = ['en', 'ru', 'he'];
  return validLocales.includes(locale) ? locale : 'en';
}
```

#### Fallback Query System
```javascript
// Automatic English fallback for missing translations
async function queryWithFallback(query, params) {
  let result = await queryDatabase(query, params);
  
  // If no result and not English, fallback to English
  if ((!result || result.length === 0) && params[0] !== 'en') {
    const fallbackParams = ['en', ...params.slice(1)];
    result = await queryDatabase(query, fallbackParams);
  }
  
  return result;
}
```

#### API Response Format (Custom JSON Structure)
```javascript
// All responses follow consistent format for frontend compatibility
app.get('/api/home-page', async (req, res) => {
  const locale = getLocale(req);
  const data = await queryWithFallback(
    'SELECT * FROM home_pages WHERE locale = $1 AND published_at IS NOT NULL',
    [locale]
  );
  
  res.json({
    data: {
      id: data[0].id,
      attributes: data[0]  // All database fields
    }
  });
});
```

---

## ðŸ“ File Structure

### ðŸ—‚ï¸ Complete Directory Layout
```
/Users/michaelmishayev/Desktop/newCode/
â”œâ”€â”€ server.js                              # ðŸ”¥ Main Express.js server (CUSTOM)
â”œâ”€â”€ migrate-to-railway.js                  # Database migration script
â”œâ”€â”€ seed-initial-data.js                   # Multi-language data seeding
â”œâ”€â”€ package.json                          # Node.js dependencies
â”œâ”€â”€ 
â”œâ”€â”€ dist/                                 # Static frontend files
â”‚   â”œâ”€â”€ en/                              # ðŸ‡¬ðŸ‡§ English website
â”‚   â”‚   â”œâ”€â”€ index.html                   # Home page
â”‚   â”‚   â”œâ”€â”€ courses.html                 # Course catalog
â”‚   â”‚   â”œâ”€â”€ teachers.html                # Teacher profiles
â”‚   â”‚   â”œâ”€â”€ career-center.html           # Career services
â”‚   â”‚   â”œâ”€â”€ career-orientation.html      # Career orientation
â”‚   â”‚   â”œâ”€â”€ about.html                   # About page
â”‚   â”‚   â””â”€â”€ detail_courses.html          # Course details
â”‚   â”œâ”€â”€ ru/                              # ðŸ‡·ðŸ‡º Russian website
â”‚   â”‚   â””â”€â”€ [same structure as English]
â”‚   â””â”€â”€ he/                              # ðŸ‡®ðŸ‡± Hebrew website (RTL)
â”‚       â””â”€â”€ [same structure as English]
â”‚
â”œâ”€â”€ js/                                  # Shared JavaScript
â”‚   â”œâ”€â”€ webflow-strapi-integration.js    # ðŸ”¥ Frontend-API integration (misleading name - it's custom)
â”‚   â”œâ”€â”€ strapi-integration.js            # ðŸ”¥ Alternative integration (misleading name - it's custom)
â”‚   â””â”€â”€ webflow.js                       # Standard Webflow JS
â”œâ”€â”€ 
â”œâ”€â”€ css/                                 # Shared stylesheets
â”œâ”€â”€ images/                              # Shared assets
â”œâ”€â”€ 
â”œâ”€â”€ content-admin-comprehensive.html     # ðŸ”§ Main admin panel (215+ fields)
â”œâ”€â”€ content-admin.html                   # Standard admin interface
â”œâ”€â”€ content-admin-basic.html             # Basic admin interface
â”œâ”€â”€ 
â”œâ”€â”€ home.html                           # Root HTML files
â”œâ”€â”€ courses.html
â”œâ”€â”€ teachers.html
â”œâ”€â”€ career-center.html
â”œâ”€â”€ career-orientation.html
â”œâ”€â”€ 
â”œâ”€â”€ strapi-fresh/                       # ðŸš« UNUSED (legacy directory)
â”œâ”€â”€ strapi-v4/                          # ðŸš« UNUSED (legacy directory)
â””â”€â”€ 
â””â”€â”€ Docs/                              # Documentation
    â”œâ”€â”€ architecture/
    â”‚   â””â”€â”€ infrastructure.md          # This file
    â””â”€â”€ README.md
```

> **âš ï¸ IMPORTANT NOTE**: Files with "strapi" in their names are **misleadingly named**. They are actually custom integrations that connect to our custom API, NOT to any third-party CMS. The directories `strapi-fresh/` and `strapi-v4/` are unused legacy directories.

---

## ðŸš¢ Railway Deployment Configuration

### âš™ï¸ Railway Project Settings
```yaml
Project Name: aistudio555jamstack-production
Repository: github.com/sravnenie-ipotek/AiStudio555_Jamstack.git
Branch: main
Region: us-west1
Plan: Hobby Plan ($5/month)

Services:
  Web Service:
    Build Command: npm install
    Start Command: node server.js
    Port: 8080
    
  PostgreSQL Database:
    Provider: Railway PostgreSQL 13+
    Storage: 1GB (expandable)
    Connection: Automatic via DATABASE_URL
    Backups: Daily automatic backups
```

### ðŸ” Environment Variables
```bash
# Auto-provided by Railway
DATABASE_URL=postgresql://username:password@host:port/database?sslmode=require
PORT=8080
RAILWAY_STATIC_URL=https://aistudio555jamstack-production.up.railway.app

# Custom variables
NODE_ENV=production  
FRONTEND_URL=https://aistudio555jamstack-production.up.railway.app
```

### ðŸš€ Deployment Process
```bash
# Automatic CI/CD Pipeline
1. Code Push â†’ GitHub (main branch)
2. Railway detects changes via webhook
3. Build: npm install + npm run migrate (if needed)
4. Deploy: node server.js
5. Health check: GET /api/status
6. Live: https://aistudio555jamstack-production.up.railway.app

# Manual Deployment
git add . && git commit -m "Deploy updates" && git push origin main
```

---

## ðŸŒ Multi-Language Implementation

### ðŸŽ¯ Language Support Matrix
| Feature | English | Russian | Hebrew | Status |
|---------|---------|---------|--------|--------|
| Frontend HTML | âœ… | âœ… | âœ… RTL | Complete |
| API Endpoints | âœ… | âœ… | âœ… | Complete |
| Database Content | âœ… | âœ… | âœ… | Complete |
| Admin Panel | âœ… | âœ… | âœ… | Complete |
| URL Routing | âœ… | âœ… | âœ… | Complete |

### ðŸ”„ Frontend Language Detection
```javascript
// Language detection in custom integration scripts
class CustomAPIIntegration {
  constructor() {
    this.currentLanguage = this.detectLanguage();
    this.API_BASE = 'https://aistudio555jamstack-production.up.railway.app/api';
  }
  
  detectLanguage() {
    // Priority: URL path â†’ localStorage â†’ browser â†’ default
    const pathLang = window.location.pathname.split('/')[2]; // /dist/[lang]/
    const storedLang = localStorage.getItem('selectedLanguage');
    const browserLang = navigator.language.substring(0, 2);
    
    const validLangs = ['en', 'ru', 'he'];
    return validLangs.includes(pathLang) ? pathLang :
           validLangs.includes(storedLang) ? storedLang :
           validLangs.includes(browserLang) ? browserLang : 'en';
  }
}
```

### ðŸŒ RTL Support (Hebrew)
```css
/* Automatic RTL for Hebrew */
[dir="rtl"] {
  direction: rtl;
  text-align: right;
}

[dir="rtl"] .container {
  margin-right: auto;
  margin-left: 0;
}

/* Hebrew-specific styling */
.he body {
  font-family: 'Noto Sans Hebrew', Arial, sans-serif;
}
```

---

## ðŸ”Œ API Documentation

### ðŸ“‹ Core Endpoints

#### System Status
```http
GET /api/status
Response: {
  "status": "âœ… Operational",
  "database": "ðŸ˜ Railway PostgreSQL",
  "platform": "ðŸš‚ Railway",
  "environment": "production",
  "timestamp": "2025-09-09T12:00:00.000Z",
  "content": {
    "homePages": 3,
    "courses": 12,
    "blogPosts": 9,
    "teachers": 9
  },
  "note": "Custom Live API (100% custom implementation)"
}
```

#### Multi-Language Content Endpoints
```http
# Home Page (123+ fields)
GET /api/home-page?locale=en
GET /api/home-page?locale=ru  
GET /api/home-page?locale=he

# Courses
GET /api/courses?locale=en        # All courses
GET /api/courses/:id?locale=en    # Single course

# Teachers  
GET /api/teachers?locale=en
GET /api/teachers/:id?locale=en

# Blog Posts
GET /api/blog-posts?locale=en
GET /api/blog-posts/:id?locale=en

# Career Pages
GET /api/career-center-page?locale=en
GET /api/career-orientation-page?locale=en    # 215+ fields

# Other Pages
GET /api/about-page?locale=en
GET /api/contact-page?locale=en
GET /api/faqs?locale=en
```

#### Database Management
```http
# Seed database with multi-language content
GET /api/seed-database
Response: {
  "success": true,
  "message": "Database seeded successfully",
  "languages": ["en", "ru", "he"],
  "content_types": ["home_pages", "courses", "teachers", "blog_posts"]
}

# Reset database (dev only)
GET /api/reset-database
```

#### Language Routing
```http
# Static file serving with language support
GET /en/                    â†’ /dist/en/index.html
GET /ru/                    â†’ /dist/ru/index.html  
GET /he/                    â†’ /dist/he/index.html
GET /en/courses.html        â†’ /dist/en/courses.html
GET /he/teachers.html       â†’ /dist/he/teachers.html
```

---

## ðŸŽ¨ Frontend Architecture

### ðŸ“± Static Site Organization
```
Frontend Architecture:
â”œâ”€â”€ /dist/en/           # English version (Primary)
â”œâ”€â”€ /dist/ru/           # Russian version  
â”œâ”€â”€ /dist/he/           # Hebrew version (RTL)
â”œâ”€â”€ /images/            # Shared assets (served to all languages)
â”œâ”€â”€ /css/               # Shared stylesheets
â””â”€â”€ /js/                # Shared JavaScript
    â”œâ”€â”€ webflow-strapi-integration.js  # Custom API integration (misleading name)
    â”œâ”€â”€ strapi-integration.js         # Alternative integration (misleading name)
    â””â”€â”€ webflow.js                    # Standard Webflow JS
```

### âš¡ Integration Layer (Text-Matching Translation System)

> **âš ï¸ CRITICAL**: The translation system finds elements by matching English text content!

#### How Translations Actually Work:
```javascript
// FRAGILE: Finds buttons by exact text match
if (button.textContent === 'Sign Up Today') {
  button.textContent = translations.btnSignUpToday; // Russian/Hebrew
}
// If English text changes, translations BREAK!
```

#### Translation System Components:
1. **js/ui-translator.js** - Finds elements by text content
2. **js/translations-config.js** - Static fallback translations
3. **js/hebrew-translations-fix.js** - Override hack for Hebrew
4. **js/webflow-strapi-integration.js** - Misleading name, custom API

```javascript
// Frontend-Backend Integration (Custom Implementation)
class CustomIntegration {
  async loadPageContent() {
    const currentPath = window.location.pathname;
    const pageName = currentPath.split('/').pop()?.replace('.html', '');
    
    switch (pageName) {
      case 'index':
      case 'home':
        await this.loadHomeContent();
        break;
      case 'courses':
        await this.loadCoursesContent();
        break;
      case 'teachers':
        await this.loadTeachersContent();
        break;
      case 'career-center':
        await this.loadCareerContent('career-center');
        break;
      case 'career-orientation':
        await this.loadCareerContent('career-orientation');
        break;
    }
  }
  
  async fetchAPI(endpoint) {
    const url = `${this.API_BASE}${endpoint}?locale=${this.currentLanguage}`;
    const response = await fetch(url);
    return await response.json();
  }
}
```

### ðŸŽ­ Preview Mode Support
```javascript
// Live preview functionality
document.addEventListener('DOMContentLoaded', function() {
  const urlParams = new URLSearchParams(window.location.search);
  const previewMode = urlParams.get('preview') === 'true';
  
  if (previewMode || window.location.hostname === 'localhost') {
    const integration = new CustomIntegration();
    integration.initialize();
    integration.enablePreviewMode(); // Shows "ðŸ‘ï¸ Preview Mode" banner
  }
});
```

---

## ðŸ› ï¸ Development & Maintenance

### ðŸ–¥ï¸ Local Development Setup
```bash
# 1. Clone Repository
git clone git@github.com:sravnenie-ipotek/AiStudio555_Jamstack.git
cd AiStudio555_Jamstack

# 2. Install Dependencies
npm install

# 3. Setup Local PostgreSQL Database
# IMPORTANT: We use PostgreSQL locally now, not SQLite
./use-existing-postgres.sh
# This will:
# - Copy production data from Railway
# - Create local aistudio_db database
# - Generate .env file with connection string

# 4. Start Development Server (after computer restart)
./start-after-restart.sh
# Or manually:
npm start
# â†’ Server running at http://localhost:3000
# â†’ Using local PostgreSQL on port 5432

# 5. Test Multi-Language APIs
curl "http://localhost:3000/api/home-page?locale=en"
curl "http://localhost:3000/api/courses?locale=ru"  
curl "http://localhost:3000/api/teachers?locale=he"

# 6. Access Frontend
open http://localhost:3000/dist/en/
open http://localhost:3000/dist/ru/
open http://localhost:3000/dist/he/

# 7. Admin Panel
open http://localhost:3000/content-admin-comprehensive.html
```

### ðŸ“¦ Dependencies Overview
```json
{
  "dependencies": {
    "express": "^4.18.2",       // Web server framework
    "cors": "^2.8.5",           // Cross-origin resource sharing
    "pg": "^8.11.3",            // PostgreSQL client
    "sqlite3": "^5.1.6",       // SQLite fallback for development
    "axios": "^1.6.2",         // HTTP client
    "cheerio": "^1.0.0-rc.12",  // HTML parsing
    "socket.io": "^4.5.4",     // Real-time features (future)
    "dotenv": "^16.3.1"        // Environment variables
  },
  "devDependencies": {
    "concurrently": "^8.2.2",  // Run multiple commands
    "nodemon": "^3.0.2",       // Development auto-restart
    "puppeteer": "^21.6.1",    // Screenshot generation
    "jest": "^29.7.0"          // Testing framework
  }
}
```

### ðŸ” Development Scripts
```bash
# Development
npm run dev              # Run all services concurrently
npm run frontend:dev     # Python HTTP server on port 3005
npm start               # Production server

# Database
npm run migrate         # Run PostgreSQL migration
npm run seed            # Seed database with content

# Build & Deploy
npm run build           # Build static sites
npm run deploy:github   # Deploy to GitHub
git push origin main    # Auto-deploy to Railway

# Utilities
npm run generate-screenshots    # Generate page screenshots
npm run validate-content       # Validate content integrity
npm run backup-content         # Backup database content
```

---

## ðŸ”’ Security & Performance

### ðŸ›¡ï¸ Security Measures
- âœ… SSL/TLS encryption (Railway automatic HTTPS)
- âœ… CORS configuration for allowed domains
- âœ… PostgreSQL connections with SSL required
- âœ… Input sanitization and validation
- âœ… No sensitive credentials in frontend code
- âœ… Environment-based configuration
- âš ï¸ Rate limiting needed for production scaling
- âš ï¸ API authentication planned for admin operations

### âš¡ Performance Optimizations
- âœ… Static file serving with Express
- âœ… Database connection pooling
- âœ… Query optimization with indexes
- âœ… Efficient locale detection and fallback
- âœ… Conditional language-specific routing
- âœ… SQLite fallback for development
- âš ï¸ CDN integration planned for global assets
- âš ï¸ Redis caching layer planned for API responses

### ðŸ“Š Current Performance Metrics
```yaml
API Response Time: ~150ms average
Database Connection: 99.9% uptime (Railway SLA)
Static File Serving: Direct Express.js (fast)
Multi-language Support: No performance penalty
Build Time: ~30 seconds (Railway auto-deploy)
```

---

## ðŸš€ Scaling Considerations

### ðŸ“ˆ Current Limits (Railway Hobby)
```yaml
Plan: $5/month Hobby Plan
Memory: 512MB RAM
Storage: 1GB PostgreSQL + 1GB app storage
CPU: Shared
Bandwidth: Unlimited with fair usage
Uptime: 99.9% SLA
```

### ðŸ”„ Scaling Path
```yaml
Pro Plan ($20/month):
  Memory: 8GB RAM
  Storage: 100GB PostgreSQL
  CPU: 4 vCPU
  Priority Support: âœ…

Team Plan ($100/month):
  Dedicated Resources: âœ…
  Advanced Monitoring: âœ…
  Multiple Environments: âœ…

Enterprise:
  Custom Solutions: Available
  On-premise Options: Available
```

---

## ðŸ”§ Admin Panel Architecture

### ðŸŽ›ï¸ Custom Admin Interface
```javascript
// Admin panel features (content-admin-comprehensive.html)
Features:
âœ… 215+ editable fields across all content types
âœ… Multi-language content management
âœ… Real-time API connectivity testing
âœ… Comprehensive form validation
âœ… Visual section management
âœ… Tab-based interface for different content types
âœ… Live status monitoring
âœ… CRUD operations for all content

Content Types Managed:
- Home Page (123+ fields)
- Career Orientation (215+ fields) 
- Career Center
- Courses
- Teachers
- Blog Posts
- FAQs
- About Pages
- Contact Information
- Career Resources
```

### ðŸŽ¯ Admin Panel API Integration
```javascript
// Admin panel connects to custom API endpoints
const API_URL_READ = 'https://aistudio555jamstack-production.up.railway.app/api';
const API_URL_CRUD = 'https://aistudio555jamstack-production.up.railway.app/api';

// Tab switching and content loading
function showSection(sectionName) {
  // Hide all sections
  document.querySelectorAll('.content-section').forEach(section => {
    section.classList.remove('active');
  });
  
  // Show selected section and load data
  document.getElementById(sectionName).classList.add('active');
  loadSectionData(sectionName);
}

// Dynamic content loading
async function loadSectionData(sectionName) {
  switch (sectionName) {
    case 'home-page':
      await loadCompleteHomePage();
      break;
    case 'courses':
      await loadCourses();
      break;
    case 'career-orientation':
      await loadCareerOrientationPage();
      break;
    // ... other sections
  }
}
```

---

## ðŸš€ Future Roadmap

### ðŸŽ¯ Planned Enhancements

#### Phase 1: Enhanced Admin Experience
- [ ] Real-time preview for content changes
- [ ] Image upload and management system
- [ ] Bulk content operations
- [ ] Content history and versioning
- [ ] Multi-user admin access with roles

#### Phase 2: Performance & SEO
- [ ] CDN integration (Cloudflare/AWS CloudFront)
- [ ] Redis caching layer for API responses
- [ ] Language-specific meta tags and SEO
- [ ] Automated sitemap generation
- [ ] Google Analytics integration

#### Phase 3: Advanced Features
- [ ] User authentication and enrollment system
- [ ] Payment processing (Stripe, PayPal, Razorpay)
- [ ] Email notification system (SendGrid/Mailgun)
- [ ] Course progress tracking
- [ ] Certificate generation system

#### Phase 4: Enterprise Features
- [ ] Advanced analytics dashboard
- [ ] A/B testing framework
- [ ] Multi-tenant architecture
- [ ] API rate limiting and authentication
- [ ] Advanced monitoring and logging

---

## ðŸ“ž Support & Maintenance

### ðŸ”§ Common Operations
```bash
# Deploy New Version
git add . && git commit -m "Update content" && git push origin main

# Local Database Operations
# Start after restart
./start-after-restart.sh

# Sync production data to local
./use-existing-postgres.sh

# Check local database
psql -U postgres -d aistudio_db -c "\dt"

# Production Operations
# Reset Database Content
curl https://aistudio555jamstack-production.up.railway.app/api/seed-database

# Check System Status
curl https://aistudio555jamstack-production.up.railway.app/api/status

# Add New Language (requires code changes)
1. Update seed-initial-data.js with new locale content
2. Add locale to validLocales array in server.js (line 118)
3. Create /dist/[locale]/ frontend directory
4. Update getLocale() function to support new language
5. Deploy changes via Git push
```

### ðŸ†˜ Troubleshooting Guide
| Issue | Probable Cause | Solution |
|-------|----------------|----------|
| API returning empty data | Database not seeded | Visit `/api/seed-database` |
| Missing translations | Locale not specified | Add `?locale=ru` to API calls |
| Admin panel errors | JavaScript syntax issues | Check browser console for errors |
| Database connection failed | Railway PostgreSQL issue | Check Railway dashboard |
| RTL not working for Hebrew | Language detection failure | Verify `dist/he/` path in URL |
| Static files 404 | Railway deployment issue | Check if dist/ directory deployed |
| Deployment failed | Build error | Check Railway build logs |

### ðŸ“Š Monitoring & Alerts
```yaml
Health Monitoring:
- API Status: /api/status endpoint
- Database: Railway PostgreSQL metrics
- Application Logs: Railway dashboard
- Uptime: 99.9% target SLA

Key Metrics to Watch:
- Response time > 500ms
- Database connection failures
- Memory usage > 80%
- Disk space usage > 80%
- Failed deployments

Alert Channels:
- Railway email notifications
- GitHub commit status checks
```

---

## âœ… Current Implementation Status

### ðŸŽ¯ Completed Components
- âœ… **Custom Express.js API Server** (100% custom, NO third-party CMS)
- âœ… **Multi-language PostgreSQL database** (English, Russian, Hebrew)
- âœ… **API endpoints with locale support and fallback**
- âœ… **Static frontend with language-specific routing**
- âœ… **Railway deployment with automatic CI/CD**
- âœ… **Custom admin panel with 215+ fields**
- âœ… **Database migration from SQLite to PostgreSQL**
- âœ… **Auto-seeding with comprehensive multi-language content**
- âœ… **Frontend-backend integration layer**
- âœ… **Preview mode support for content editing**
- âœ… **RTL support for Hebrew language**

### ðŸ”§ Technical Achievements
- âœ… **Custom API format** designed for frontend compatibility
- âœ… **Zero-downtime deployments** via Railway
- âœ… **Database schema supporting 123+ home page fields**
- âœ… **Career orientation page with 215+ fields**
- âœ… **Automatic English fallback for missing translations**
- âœ… **Multi-environment support** (development/production)
- âœ… **Comprehensive error handling and logging**

### ðŸ“ˆ Success Metrics
| Metric | Target | Actual | Status |
|--------|---------|---------|---------|
| API Response Time | < 200ms | ~150ms | âœ… **EXCEEDS** |
| Database Uptime | > 99% | 99.9% | âœ… **EXCEEDS** |
| Multi-Language Support | 3 languages | English, Russian, Hebrew | âœ… **COMPLETE** |
| Admin Panel Fields | 200+ | 215+ | âœ… **EXCEEDS** |
| Deployment Time | < 2 min | ~30 sec | âœ… **EXCEEDS** |

---

## ðŸ† System Architecture Summary

### ðŸŽ¯ **System Architecture Reality Check**

#### What Marketing Says vs. Technical Reality

**Marketing**: "100% Custom JAMstack Platform"
**Reality**: Webflow-generated HTML with custom backend glued on

**Marketing**: "Zero vendor lock-in"
**Reality**: Complete Webflow lock-in, cannot regenerate without breaking everything

**Marketing**: "Modern architecture"
**Reality**: Wide-table database, text-matching translations, Hebrew override hacks

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ðŸŒŸ ACTUAL SYSTEM ARCHITECTURE                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ðŸ“± Frontend (Multi-Language Static HTML)                          â”‚
â”‚  â”œâ”€â”€ English: /dist/en/ (courses.html, teachers.html, etc.)        â”‚
â”‚  â”œâ”€â”€ Russian: /dist/ru/ (ÐºÑƒÑ€ÑÑ‹.html, Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»Ð¸.html, etc.)     â”‚
â”‚  â””â”€â”€ Hebrew:  /dist/he/ (×§×•×¨×¡×™×.html, ×ž×•×¨×™×.html, etc.) [RTL]       â”‚
â”‚                           â–¼                                         â”‚
â”‚  ðŸ”Œ Integration Layer                                               â”‚
â”‚  â””â”€â”€ js/webflow-strapi-integration.js (MISLEADING NAME - Custom)   â”‚
â”‚                           â–¼                                         â”‚
â”‚  ðŸš€ 100% Custom Express.js API Server                              â”‚
â”‚  â”œâ”€â”€ /api/home-page?locale=en (123+ fields)                       â”‚
â”‚  â”œâ”€â”€ /api/courses?locale=ru                                        â”‚
â”‚  â”œâ”€â”€ /api/teachers?locale=he                                       â”‚
â”‚  â”œâ”€â”€ /api/career-orientation-page?locale=en (215+ fields)         â”‚
â”‚  â””â”€â”€ Multi-language routing + fallback system                     â”‚
â”‚                           â–¼                                         â”‚
â”‚  ðŸ—ƒï¸ Railway PostgreSQL Database                                    â”‚
â”‚  â”œâ”€â”€ home_pages (locale support)                                   â”‚
â”‚  â”œâ”€â”€ courses (multi-language)                                      â”‚
â”‚  â”œâ”€â”€ teachers (multi-language)                                     â”‚
â”‚  â”œâ”€â”€ career_orientation_pages (215+ fields)                       â”‚
â”‚  â””â”€â”€ Auto-migration from SQLite                                    â”‚
â”‚                           â–¼                                         â”‚
â”‚  ðŸŽ›ï¸ Custom Admin Panel                                             â”‚
â”‚  â”œâ”€â”€ content-admin-comprehensive.html (215+ fields)               â”‚
â”‚  â”œâ”€â”€ Real-time API connectivity                                    â”‚
â”‚  â”œâ”€â”€ Multi-language content management                             â”‚
â”‚  â””â”€â”€ Visual section management                                     â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸš‚ Deployment: Railway Platform                                   â”‚
â”‚  â”œâ”€â”€ Auto-deploy from GitHub (main branch)                         â”‚
â”‚  â”œâ”€â”€ PostgreSQL database included                                  â”‚
â”‚  â”œâ”€â”€ SSL/HTTPS automatic                                           â”‚
â”‚  â””â”€â”€ $5/month hobby plan                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âš¡ **System Constraints & Technical Debt:**

#### Cannot Change:
1. **HTML Structure** - Webflow-generated, animations depend on exact structure
2. **CSS Classes/IDs** - data-w-id attributes tied to animations
3. **Button Text** - Translation system finds elements by English text
4. **Database Fields** - JavaScript expects exact column names
5. **Course Count** - Hardcoded to 6 courses (course_1 through course_6)

#### Technical Debt:
1. **Wide Tables** - 123+ columns in single table (home_pages)
2. **Text Matching** - Fragile translation system based on content
3. **Hebrew Override** - Hack file to prevent API breaking Hebrew
4. **No Relationships** - Courses embedded in pages, not referenced
5. **Fixed Slots** - Can't add 7th course without schema change

#### Hidden Dependencies:
1. **Webflow Export** - Cannot re-export without losing all work
2. **Animation System** - Tied to specific HTML structure
3. **Translation Logic** - Depends on exact English text
4. **Field Names** - course_1_title, course_2_title pattern everywhere

---

## âš ï¸ **Important Notes About File Naming**

### ðŸ·ï¸ Misleading Names (Legacy from Initial Planning)
```
âŒ js/webflow-strapi-integration.js  â†’ Actually connects to CUSTOM API
âŒ js/strapi-integration.js          â†’ Actually connects to CUSTOM API  
âŒ Class "StrapiIntegration"         â†’ Actually custom implementation
âŒ strapi-fresh/ directory           â†’ UNUSED legacy directory
âŒ strapi-v4/ directory              â†’ UNUSED legacy directory
```

### âœ… Reality
- **ALL integrations connect to our custom Express.js server**
- **NO third-party CMS is used anywhere in the system**
- **File names are misleading due to legacy planning phase**
- **System is 100% custom-built JAMstack architecture**

---

**ðŸ”„ Last Updated**: September 9, 2025  
**ðŸ“ Document Version**: 3.0 (Corrected - NO Third-Party CMS)  
**ðŸ‘¥ Maintained By**: Development Team  
**ðŸŒŸ Status**: **FULLY OPERATIONAL** âœ…

---

*This infrastructure documentation accurately reflects the complete technical architecture of the AI Studio multi-language e-learning platform with 100% custom backend implementation (NO third-party CMS whatsoever).*
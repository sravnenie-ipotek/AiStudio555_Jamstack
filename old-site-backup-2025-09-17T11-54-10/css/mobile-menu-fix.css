/* Mobile Menu Fix - Ensure menu is closed by default and language selector positioning */

/* CRITICAL: Force mobile menu to be CLOSED on page load */
@media screen and (max-width: 991px) {
  /* Hide menu by default on all mobile/tablet devices */
  .w-nav-menu {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateX(-100%);
    transition: all 0.3s ease;
  }

  /* Only show menu when hamburger is clicked */
  .w--nav-menu-open .w-nav-menu,
  .w-nav.w--open .w-nav-menu,
  html.w--nav-menu-open .w-nav-menu {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateX(0);
  }

  /* Ensure overlay is hidden by default */
  .w-nav-overlay {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
  }

  /* Show overlay only when menu is open */
  .w--nav-menu-open .w-nav-overlay,
  html.w--nav-menu-open .w-nav-overlay {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
}

/* Position language selector next to hamburger button */
@media screen and (max-width: 991px) {
  #language-switcher {
    position: fixed !important;
    top: 20px !important;
    right: 70px !important; /* Position to the left of hamburger button */
    z-index: 9999 !important; /* Below hamburger but above other content */
  }

  /* Adjust for smaller screens */
  @media screen and (max-width: 479px) {
    #language-switcher {
      top: 15px !important;
      right: 60px !important; /* Closer on mobile */
    }

    #language-switcher select {
      padding: 8px 12px !important;
      font-size: 13px !important;
      min-height: 40px !important;
    }
  }

  /* RTL adjustment for Hebrew pages */
  html[dir="rtl"] #language-switcher {
    right: auto !important;
    left: 70px !important; /* Mirror position for RTL */
  }

  html[dir="rtl"] @media screen and (max-width: 479px) {
    #language-switcher {
      left: 60px !important;
    }
  }
}

/* Ensure hamburger button is properly positioned */
.w-nav-button {
  position: fixed !important;
  top: 20px !important;
  right: 20px !important;
  z-index: 10001 !important; /* Highest z-index */
  display: none !important; /* Hidden by default on desktop */
}

@media screen and (max-width: 991px) {
  .w-nav-button {
    display: block !important; /* Show on mobile/tablet */
  }
}

/* RTL adjustment for hamburger */
html[dir="rtl"] .w-nav-button {
  right: auto !important;
  left: 20px !important;
}

/* Ensure proper stacking order */
.navbar {
  z-index: 9000 !important;
}

.w-nav {
  z-index: 9000 !important;
}

/* Additional safeguard for menu state */
body:not(.w--nav-menu-open) .w-nav-menu {
  display: none !important;
}

/* Override any inline styles that might force menu open */
@media screen and (max-width: 991px) {
  .w-nav-menu[style*="display: block"] {
    display: none !important;
  }

  .w--nav-menu-open .w-nav-menu[style*="display: block"],
  .w--nav-menu-open .w-nav-menu {
    display: block !important;
  }
}

/* Ensure menu items are properly styled when menu IS open */
.w--nav-menu-open .w-nav-menu {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background: rgba(5, 5, 26, 0.98) !important;
  padding: 80px 20px 20px !important; /* Top padding for hamburger/language selector */
  overflow-y: auto !important;
}

/* Style menu items */
.w--nav-menu-open .w-nav-menu .nav-link {
  display: block !important;
  padding: 15px 0 !important;
  color: white !important;
  font-size: 18px !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* Initial state enforcement with JavaScript */
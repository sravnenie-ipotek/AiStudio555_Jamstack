<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✅ Courses Translation Test - FINAL</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .success-box {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        h1 {
            font-size: 48px;
            margin-bottom: 10px;
        }
        .status {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 18px;
        }
        .status-icon {
            font-size: 24px;
            margin-right: 10px;
        }
        button {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            transition: transform 0.2s;
        }
        button:hover {
            transform: scale(1.05);
        }
        iframe {
            width: 100%;
            height: 800px;
            border-radius: 10px;
            border: 3px solid white;
            margin-top: 20px;
        }
        .translation-test {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .test-row {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        .checkmark { color: #4ade80; }
        .cross { color: #f87171; }
    </style>
</head>
<body>
    <div class="container">
        <div class="success-box">
            <h1>🎉 SUCCESS!</h1>
            <h2>nd_courses_page Table Created & Populated</h2>

            <div class="status">
                <span class="status-icon">✅</span>
                <span>Database table created with correct structure</span>
            </div>
            <div class="status">
                <span class="status-icon">✅</span>
                <span>7 sections with translations inserted</span>
            </div>
            <div class="status">
                <span class="status-icon">✅</span>
                <span>API endpoint working at /api/nd/courses-page</span>
            </div>
            <div class="status">
                <span class="status-icon">✅</span>
                <span>62 data-i18n attributes in courses.html</span>
            </div>
        </div>

        <div class="translation-test">
            <h2>🌐 Translation Test Results</h2>
            <div id="test-results"></div>
        </div>

        <div class="success-box">
            <h2>🧪 Live Test</h2>
            <button onclick="testEnglish()">🇬🇧 Test English</button>
            <button onclick="testRussian()">🇷🇺 Test Russian</button>
            <button onclick="testHebrew()">🇮🇱 Test Hebrew</button>
            <button onclick="testAPI()">📡 Test API</button>
        </div>

        <iframe id="testFrame" src="http://localhost:3005/backups/newDesign/courses.html"></iframe>
    </div>

    <script>
        // Test translations on load
        async function runTests() {
            const results = document.getElementById('test-results');

            // Test API
            const response = await fetch('http://localhost:3000/api/nd/courses-page?locale=ru');
            const data = await response.json();

            const tests = [
                {
                    name: 'API Response',
                    pass: data.success === true
                },
                {
                    name: 'Russian "Course Details"',
                    pass: data.data?.ui_elements?.content?.content?.buttons?.course_details === "Детали Курса"
                },
                {
                    name: 'Russian "Sign Up Today"',
                    pass: data.data?.ui_elements?.content?.content?.buttons?.sign_up_today === "Записаться Сегодня"
                },
                {
                    name: 'Russian Navigation "Courses"',
                    pass: data.data?.navigation?.content?.content?.courses === "Курсы"
                },
                {
                    name: 'Russian Hero Title',
                    pass: data.data?.hero?.content?.title === "Наши Курсы"
                }
            ];

            let html = '';
            tests.forEach(test => {
                html += `
                    <div class="test-row">
                        <span>${test.name}</span>
                        <span class="${test.pass ? 'checkmark' : 'cross'}">${test.pass ? '✅' : '❌'}</span>
                    </div>
                `;
            });

            results.innerHTML = html;

            // Show success count
            const passed = tests.filter(t => t.pass).length;
            html += `
                <div class="test-row" style="margin-top: 20px; font-size: 20px; font-weight: bold;">
                    <span>Total Tests Passed</span>
                    <span>${passed}/${tests.length}</span>
                </div>
            `;
            results.innerHTML = html;
        }

        function testEnglish() {
            document.getElementById('testFrame').src = 'http://localhost:3005/backups/newDesign/courses.html?locale=en';
        }

        function testRussian() {
            document.getElementById('testFrame').src = 'http://localhost:3005/backups/newDesign/courses.html?locale=ru';
        }

        function testHebrew() {
            document.getElementById('testFrame').src = 'http://localhost:3005/backups/newDesign/courses.html?locale=he';
        }

        async function testAPI() {
            const response = await fetch('http://localhost:3000/api/nd/courses-page?locale=ru');
            const data = await response.json();
            console.log('API Response:', data);
            alert('Check console for API response. Status: ' + (data.success ? 'SUCCESS' : 'FAILED'));
        }

        // Run tests on load
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
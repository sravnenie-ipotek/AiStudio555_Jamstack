<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Test FAQ Fix</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; direction: rtl; }
        .test-result { margin: 20px 0; padding: 15px; border-radius: 8px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        iframe { width: 100%; height: 600px; border: 2px solid #ddd; }
    </style>
</head>
<body>
    <h1>בדיקת תיקון כותרות FAQ</h1>

    <div class="test-result info">
        <h2>הכותרות הנכונות צריכות להיות:</h2>
        <ol>
            <li>קורסים מוצעים</li>
            <li>משך הקורסים</li>
            <li>תעודות והסמכה</li>
            <li>תמיכה בקריירה</li>
            <li>דרישות קדם</li>
            <li>למידה בקצב אישי</li>
        </ol>
    </div>

    <div id="test-results"></div>

    <h2>בדיקה חיה של הדף:</h2>
    <iframe src="http://localhost:3005/he/courses.html" id="courses-frame"></iframe>

    <script>
        // Wait for iframe to load
        document.getElementById('courses-frame').onload = function() {
            setTimeout(() => {
                try {
                    const iframe = document.getElementById('courses-frame');
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

                    // Expected FAQ titles
                    const expectedTitles = [
                        'קורסים מוצעים',
                        'משך הקורסים',
                        'תעודות והסמכה',
                        'תמיכה בקריירה',
                        'דרישות קדם',
                        'למידה בקצב אישי'
                    ];

                    // Find FAQ questions in iframe
                    const faqQuestions = iframeDoc.querySelectorAll('.faq-question');

                    let resultsHTML = '<div class="test-result info">';
                    resultsHTML += `<h3>נמצאו ${faqQuestions.length} שאלות FAQ</h3>`;

                    if (faqQuestions.length > 0) {
                        resultsHTML += '<ul>';
                        faqQuestions.forEach((question, index) => {
                            const text = question.textContent.trim();
                            const expected = expectedTitles[index] || 'לא ידוע';
                            const isCorrect = text === expected;

                            resultsHTML += `<li>${isCorrect ? '✅' : '❌'} שאלה ${index + 1}: "${text}" ${isCorrect ? '(נכון!)' : `(צריך להיות: "${expected}")`}</li>`;
                        });
                        resultsHTML += '</ul>';
                    }

                    resultsHTML += '</div>';

                    // Check for Hebrew placeholders
                    const placeholders = Array.from(iframeDoc.querySelectorAll('*')).filter(el => {
                        return el.textContent && el.textContent.trim() === 'שלטון ב-AI וטכנולוגיה';
                    });

                    if (placeholders.length > 0) {
                        resultsHTML += `<div class="test-result error">`;
                        resultsHTML += `<h3>⚠️ נמצאו ${placeholders.length} מופעים של הטקסט הישן "שלטון ב-AI וטכנולוגיה"</h3>`;
                        resultsHTML += '</div>';
                    } else {
                        resultsHTML += `<div class="test-result success">`;
                        resultsHTML += `<h3>✅ לא נמצאו מופעים של הטקסט הישן!</h3>`;
                        resultsHTML += '</div>';
                    }

                    document.getElementById('test-results').innerHTML = resultsHTML;

                } catch (error) {
                    document.getElementById('test-results').innerHTML = `
                        <div class="test-result error">
                            <h3>שגיאה בבדיקה:</h3>
                            <p>${error.message}</p>
                            <p>הערה: ייתכן שיש בעיית CORS. בדוק ישירות בדף: <a href="http://localhost:3005/he/courses.html" target="_blank">http://localhost:3005/he/courses.html</a></p>
                        </div>
                    `;
                }
            }, 3000); // Wait 3 seconds for scripts to load
        };
    </script>
</body>
</html>
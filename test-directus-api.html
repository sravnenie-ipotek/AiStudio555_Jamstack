<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Directus API Test - AI Studio</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 { 
            color: #333; 
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
        }
        .test-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #007aff;
        }
        .test-section h2 {
            color: #007aff;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        button {
            background: #007aff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: background 0.3s;
        }
        button:hover {
            background: #0056b3;
        }
        button.success { background: #28a745; }
        button.danger { background: #dc3545; }
        .results {
            background: #fff;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.loading { background: #fff3cd; color: #856404; }
        .endpoints {
            background: #e8f4fd;
            border: 2px solid #b8daff;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        .endpoints h3 { color: #004085; margin-bottom: 10px; }
        .endpoints code {
            background: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            color: #e83e8c;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
    </style>
  <link href="css/mobile-fix.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="container">
        <h1>üöÄ Directus API Test Dashboard</h1>
        <p class="subtitle">Test your Directus API endpoints and verify data access</p>

        <div class="endpoints">
            <h3>üìç Your Directus Endpoints:</h3>
            <p><strong>Base URL:</strong> <code>https://attractive-determination-production.up.railway.app</code></p>
            <p><strong>REST API:</strong> <code>/items/{collection}</code></p>
            <p><strong>GraphQL:</strong> <code>/graphql</code></p>
            <p><strong>Admin Panel:</strong> <code>/admin</code></p>
        </div>

        <div class="grid">
            <!-- REST API Tests -->
            <div class="test-section">
                <h2>üîÑ REST API Tests</h2>
                <button onclick="testCourses()">Get Courses</button>
                <button onclick="testHomePage()">Get Home Page</button>
                <button onclick="testTeachers()">Get Teachers</button>
                <button onclick="testBlogPosts()">Get Blog Posts</button>
                <button onclick="testAboutPage()">Get About Page</button>
                <button onclick="testFAQs()">Get FAQs</button>
                <div id="rest-status" class="status loading">Ready</div>
                <div id="rest-results" class="results">Click a button to test REST API endpoints...</div>
            </div>

            <!-- GraphQL Tests -->
            <div class="test-section">
                <h2>üìä GraphQL Tests</h2>
                <button onclick="testGraphQLCourses()">Query Courses</button>
                <button onclick="testGraphQLCustom()">Custom Query</button>
                <div id="graphql-status" class="status loading">Ready</div>
                <div id="graphql-results" class="results">Click a button to test GraphQL queries...</div>
            </div>

            <!-- Multi-language Tests -->
            <div class="test-section">
                <h2>üåê Multi-Language Tests</h2>
                <button onclick="testLanguage('en')">English Content</button>
                <button onclick="testLanguage('ru')">Russian Content</button>
                <button onclick="testLanguage('he')">Hebrew Content</button>
                <div id="lang-status" class="status loading">Ready</div>
                <div id="lang-results" class="results">Test multi-language content...</div>
            </div>

            <!-- Direct API Test -->
            <div class="test-section">
                <h2>üéØ Direct API Test</h2>
                <button onclick="testDirectAPI()">Test Direct Access</button>
                <button onclick="testAPIStatus()">Check API Status</button>
                <button class="success" onclick="compareBothAPIs()">Compare Both APIs</button>
                <div id="direct-status" class="status loading">Ready</div>
                <div id="direct-results" class="results">Test direct API access...</div>
            </div>
        </div>

        <div class="test-section" style="margin-top: 30px;">
            <h2>üîß Console Commands</h2>
            <p>Open browser console (F12) and try these commands:</p>
            <div class="results">
// Get all courses
await directusAPI.getCourses()

// Get home page in Russian
await directusAPI.getHomePage('ru')

// Get teachers sorted by order
await directusAPI.getTeachers()

// GraphQL query
await directusAPI.getCoursesGraphQL()

// Get any collection
await directusAPI.getCollection('career_center_pages')
            </div>
        </div>
    </div>

    <!-- Load Directus Integration -->
    <script src="js/directus-integration.js"></script>
    
    <script>
        // Wait for Directus to initialize
        let directus;
        
        setTimeout(() => {
            directus = window.directusAPI;
            if (directus) {
                console.log('‚úÖ Directus API ready');
            } else {
                console.error('‚ùå Directus API not initialized');
            }
        }, 1000);

        // REST API Test Functions
        async function testCourses() {
            const statusEl = document.getElementById('rest-status');
            const resultsEl = document.getElementById('rest-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            resultsEl.textContent = 'Fetching courses...';
            
            try {
                const courses = await directus.getCourses();
                statusEl.className = 'status success';
                statusEl.textContent = `Success! Found ${courses ? courses.length : 0} courses`;
                resultsEl.textContent = JSON.stringify(courses, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        async function testHomePage() {
            const statusEl = document.getElementById('rest-status');
            const resultsEl = document.getElementById('rest-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            
            try {
                const homePage = await directus.getHomePage();
                statusEl.className = 'status success';
                statusEl.textContent = 'Success! Home page data retrieved';
                resultsEl.textContent = JSON.stringify(homePage, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        async function testTeachers() {
            const statusEl = document.getElementById('rest-status');
            const resultsEl = document.getElementById('rest-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            
            try {
                const teachers = await directus.getTeachers();
                statusEl.className = 'status success';
                statusEl.textContent = `Success! Found ${teachers ? teachers.length : 0} teachers`;
                resultsEl.textContent = JSON.stringify(teachers, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        async function testBlogPosts() {
            const statusEl = document.getElementById('rest-status');
            const resultsEl = document.getElementById('rest-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            
            try {
                const posts = await directus.getBlogPosts();
                statusEl.className = 'status success';
                statusEl.textContent = `Success! Found ${posts ? posts.length : 0} blog posts`;
                resultsEl.textContent = JSON.stringify(posts, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        async function testAboutPage() {
            const statusEl = document.getElementById('rest-status');
            const resultsEl = document.getElementById('rest-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            
            try {
                const about = await directus.getAboutPage();
                statusEl.className = 'status success';
                statusEl.textContent = 'Success! About page data retrieved';
                resultsEl.textContent = JSON.stringify(about, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        async function testFAQs() {
            const statusEl = document.getElementById('rest-status');
            const resultsEl = document.getElementById('rest-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            
            try {
                const faqs = await directus.getFAQs();
                statusEl.className = 'status success';
                statusEl.textContent = `Success! Found ${faqs ? faqs.length : 0} FAQs`;
                resultsEl.textContent = JSON.stringify(faqs, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        // GraphQL Test Functions
        async function testGraphQLCourses() {
            const statusEl = document.getElementById('graphql-status');
            const resultsEl = document.getElementById('graphql-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            
            try {
                const courses = await directus.getCoursesGraphQL();
                statusEl.className = 'status success';
                statusEl.textContent = `Success! GraphQL returned ${courses ? courses.length : 0} courses`;
                resultsEl.textContent = JSON.stringify(courses, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        async function testGraphQLCustom() {
            const statusEl = document.getElementById('graphql-status');
            const resultsEl = document.getElementById('graphql-results');
            
            const query = `
                query {
                    home_pages {
                        id
                        hero_title
                        hero_subtitle
                        hero_description
                    }
                }
            `;
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            
            try {
                const result = await directus.graphqlQuery(query);
                statusEl.className = 'status success';
                statusEl.textContent = 'Success! Custom GraphQL query executed';
                resultsEl.textContent = JSON.stringify(result, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        // Multi-language Test
        async function testLanguage(locale) {
            const statusEl = document.getElementById('lang-status');
            const resultsEl = document.getElementById('lang-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = `Loading ${locale} content...`;
            
            try {
                const content = await directus.getLocalizedContent('about_pages', locale);
                statusEl.className = 'status success';
                statusEl.textContent = `Success! ${locale.toUpperCase()} content retrieved`;
                resultsEl.textContent = JSON.stringify(content, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        // Direct API Test
        async function testDirectAPI() {
            const statusEl = document.getElementById('direct-status');
            const resultsEl = document.getElementById('direct-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Testing direct API access...';
            
            try {
                const response = await fetch('https://attractive-determination-production.up.railway.app/items/courses');
                const data = await response.json();
                
                statusEl.className = 'status success';
                statusEl.textContent = 'Success! Direct API access working';
                resultsEl.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        async function testAPIStatus() {
            const statusEl = document.getElementById('direct-status');
            const resultsEl = document.getElementById('direct-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Checking API status...';
            
            try {
                // Test Directus
                const directusResponse = await fetch('https://attractive-determination-production.up.railway.app/server/ping');
                
                // Test Express API
                const expressResponse = await fetch('https://aistudio555jamstack-production.up.railway.app/api/courses');
                
                const results = {
                    directus: {
                        url: 'https://attractive-determination-production.up.railway.app',
                        status: directusResponse.ok ? 'Online' : 'Offline',
                        code: directusResponse.status
                    },
                    express: {
                        url: 'https://aistudio555jamstack-production.up.railway.app',
                        status: expressResponse.ok ? 'Online' : 'Offline',
                        code: expressResponse.status
                    }
                };
                
                statusEl.className = 'status success';
                statusEl.textContent = 'API Status Check Complete';
                resultsEl.textContent = JSON.stringify(results, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }

        async function compareBothAPIs() {
            const statusEl = document.getElementById('direct-status');
            const resultsEl = document.getElementById('direct-results');
            
            statusEl.className = 'status loading';
            statusEl.textContent = 'Comparing both APIs...';
            
            try {
                // Get courses from both APIs
                const directusResponse = await fetch('https://attractive-determination-production.up.railway.app/items/courses');
                const directusData = await directusResponse.json();
                
                const expressResponse = await fetch('https://aistudio555jamstack-production.up.railway.app/api/courses');
                const expressData = await expressResponse.json();
                
                const comparison = {
                    directus: {
                        url: 'Directus API',
                        courses_count: directusData.data ? directusData.data.length : 0,
                        sample: directusData.data ? directusData.data[0] : null
                    },
                    express: {
                        url: 'Express API',
                        courses_count: Array.isArray(expressData) ? expressData.length : 0,
                        sample: Array.isArray(expressData) ? expressData[0] : null
                    }
                };
                
                statusEl.className = 'status success';
                statusEl.textContent = 'Comparison Complete - Both APIs accessing same database!';
                resultsEl.textContent = JSON.stringify(comparison, null, 2);
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error!';
                resultsEl.textContent = error.toString();
            }
        }
    </script>
  <script src="js/mobile-menu-fix.js"></script>
</body>
</html>
<!DOCTYPE html><html lang="en" dir="ltr"><head>
  <meta charset="UTF-8">
  <title>AI Studio - Redirecting...</title>
  <script>
    // Detect browser language and redirect
    const userLang = navigator.language.slice(0, 2);
    const supportedLangs = ['en', 'ru', 'he'];
    const defaultLang = 'en';
    
    const redirectLang = supportedLangs.includes(userLang) ? userLang : defaultLang;
    window.location.replace('/' + redirectLang + '/');
  </script>
  <noscript>
    <meta http-equiv="refresh" content="0; url=/en/">
  </noscript>
</head>
<body>
    <div class="language-switcher" style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
      <select onchange="switchLanguage(this.value)" style="padding: 8px; border-radius: 4px;">
        <option value="en" selected="">English</option><option value="ru">Russian</option><option value="he">Hebrew</option>
      </select>
    </div>
    <script>
      function switchLanguage(lang) {
        const currentPath = window.location.pathname;
        const pathParts = currentPath.split('/').filter(p => p);
        
        // Remove current language from path
        if (['en', 'ru', 'he'].includes(pathParts[0])) {
          pathParts.shift();
        }
        
        // Navigate to new language
        const newPath = '/' + lang + '/' + pathParts.join('/');
        window.location.href = newPath;
      }
    </script>
  
  <p>Redirecting to <a href="/en/">AI Studio</a>...</p>


    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Handle all lead forms
        const forms = document.querySelectorAll('form[data-name="lead-form"], form[id*="lead"], form[action*="leads"]');
        
        forms.forEach(form => {
          form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(form);
            const data = {
              data: {
                name: formData.get('name') || formData.get('Name'),
                email: formData.get('email') || formData.get('Email'),
                phone: formData.get('phone') || formData.get('Phone'),
                message: formData.get('message') || formData.get('Message'),
                language: document.documentElement.lang,
                source: window.location.pathname
              }
            };
            
            try {
              // Try HTTPS first, fallback to HTTP if SSL issues
              let response = await fetch('https://aistudio555-7dd54e37f0-sublime-basket-82bd4586b5.strapiapp.com/api/leads', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
              });
              
              // If HTTPS fails, try HTTP fallback
              if (!response.ok && response.status === 0) {
                console.log('HTTPS failed, trying HTTP fallback...');
                response = await fetch('http://aistudio555-7dd54e37f0-sublime-basket-82bd4586b5.strapiapp.com/api/leads', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json'
                  },
                  body: JSON.stringify(data)
                });
              }
              
              if (response.ok) {
                // Show success message
                alert('Thank you! We will contact you soon.');
                form.reset();
                
                // Optional: redirect to thank you page
                // window.location.href = '/thank-you.html';
              } else {
                throw new Error('Submission failed');
              }
            } catch (error) {
              console.error('Form submission error:', error);
              alert('Sorry, there was an error. Please try again or contact us directly.');
            }
          });
        });
      });
    </script>
  </body></html>
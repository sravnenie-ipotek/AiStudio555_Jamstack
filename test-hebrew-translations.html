<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Test Hebrew Translations</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            direction: rtl;
            text-align: right;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .status {
            font-weight: bold;
            margin: 10px 0;
        }
        .success { color: green; }
        .fail { color: red; }
        .navigation {
            background: #333;
            padding: 10px;
            margin: 20px 0;
        }
        .navigation a {
            color: white;
            margin: 0 10px;
            text-decoration: none;
        }
    </style>
  <link href="/css/desktop-language-selector-fix.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1>בדיקת תרגומים לעברית</h1>

    <div class="test-section">
        <h2>ניווט</h2>
        <div class="navigation">
            <a href="home.html">Home</a>
            <a href="courses.html">Courses</a>
            <a href="teachers.html">Teachers</a>
            <a href="pricing.html">Pricing</a>
        </div>
        <div class="status" id="nav-status">בודק...</div>
    </div>

    <div class="test-section">
        <h2>כותרות</h2>
        <h1 class="banner-heading">Unlock Potential With Proven Courses.</h1>
        <div class="section-subtitle">Expert-Led Learning</div>
        <div class="section-subtitle">Most Popular IT Courses</div>
        <div class="section-subtitle">Focus on Practice</div>
        <div class="status" id="headings-status">בודק...</div>
    </div>

    <div class="test-section">
        <h2>כפתורים</h2>
        <button class="primary-button">Sign Up Today</button>
        <button class="button">Learn More</button>
        <button class="btn">View All Courses</button>
        <div class="status" id="buttons-status">בודק...</div>
    </div>

    <div class="test-section">
        <h2>סטטוס כללי</h2>
        <div class="status" id="overall-status">בודק...</div>
        <div id="log" style="margin-top: 20px; font-family: monospace; font-size: 12px;"></div>
    </div>

    <!-- Load the Hebrew translations fix -->
    <script src="js/hebrew-translations-fix.js"></script>

    <!-- Simulate API integration scripts that would normally overwrite translations -->
    <script>
        // Simulate delay as if loading from API
        setTimeout(() => {
            console.log('Simulating API content load that would overwrite translations...');

            // This would normally overwrite with English, but our fix should prevent it
            const englishContent = {
                navHome: 'Home',
                navCourses: 'Courses',
                navTeachers: 'Teachers',
                navPricing: 'Pricing'
            };

            // Try to apply English (should be blocked by our fix)
            document.querySelectorAll('a').forEach(link => {
                const href = link.getAttribute('href');
                if (href && href.includes('home')) {
                    // This should be prevented by our fix
                    if (typeof applyHebrewTranslations === 'function') {
                        console.log('Hebrew fix is active, preventing English overwrite');
                    } else {
                        link.textContent = englishContent.navHome;
                    }
                }
            });

            // Check results after attempted overwrite
            checkTranslations();
        }, 1000);

        // Apply Hebrew translations after 1.5 seconds (as per our fix)
        setTimeout(() => {
            if (typeof applyHebrewTranslations === 'function') {
                console.log('Applying Hebrew translations as fallback...');
                applyHebrewTranslations();
            }
            checkTranslations();
        }, 1600);

        function checkTranslations() {
            const log = document.getElementById('log');
            let allPassed = true;
            let logText = '';

            // Check navigation
            const navLinks = document.querySelectorAll('.navigation a');
            let navPassed = true;
            navLinks.forEach(link => {
                const text = link.textContent.trim();
                const href = link.getAttribute('href');

                if (href.includes('home') && text === 'בית') {
                    logText += '✓ Home -> בית\n';
                } else if (href.includes('courses') && text === 'קורסים') {
                    logText += '✓ Courses -> קורסים\n';
                } else if (href.includes('teachers') && text === 'מורים') {
                    logText += '✓ Teachers -> מורים\n';
                } else if (href.includes('pricing') && text === 'מחירים') {
                    logText += '✓ Pricing -> מחירים\n';
                } else if (text !== 'Home' && text !== 'Courses' && text !== 'Teachers' && text !== 'Pricing') {
                    // Partially translated
                } else {
                    navPassed = false;
                    allPassed = false;
                    logText += `✗ ${href} still shows "${text}"\n`;
                }
            });

            document.getElementById('nav-status').className = navPassed ? 'status success' : 'status fail';
            document.getElementById('nav-status').textContent = navPassed ? '✓ הניווט תורגם בהצלחה' : '✗ הניווט לא תורגם';

            // Check headings
            let headingsPassed = true;
            const headings = document.querySelectorAll('.banner-heading, .section-subtitle');
            headings.forEach(heading => {
                const text = heading.textContent.trim();
                if (text.match(/[a-zA-Z]/) && !text.includes('IT')) {
                    headingsPassed = false;
                    allPassed = false;
                    logText += `✗ Heading still in English: "${text}"\n`;
                } else if (!text.match(/[a-zA-Z]/) || text.includes('IT')) {
                    logText += `✓ Heading translated: "${text}"\n`;
                }
            });

            document.getElementById('headings-status').className = headingsPassed ? 'status success' : 'status fail';
            document.getElementById('headings-status').textContent = headingsPassed ? '✓ הכותרות תורגמו בהצלחה' : '✗ הכותרות לא תורגמו';

            // Check buttons
            let buttonsPassed = true;
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                const text = button.textContent.trim();
                if (text === 'Sign Up Today' || text === 'Learn More' || text === 'View All Courses') {
                    buttonsPassed = false;
                    allPassed = false;
                    logText += `✗ Button still in English: "${text}"\n`;
                } else {
                    logText += `✓ Button translated: "${text}"\n`;
                }
            });

            document.getElementById('buttons-status').className = buttonsPassed ? 'status success' : 'status fail';
            document.getElementById('buttons-status').textContent = buttonsPassed ? '✓ הכפתורים תורגמו בהצלחה' : '✗ הכפתורים לא תורגמו';

            // Overall status
            document.getElementById('overall-status').className = allPassed ? 'status success' : 'status fail';
            document.getElementById('overall-status').textContent = allPassed
                ? '✓ כל התרגומים לעברית פועלים כראוי!'
                : '✗ חלק מהתרגומים לא הוחלו';

            log.innerHTML = '<strong>יומן בדיקה:</strong><br>' + logText.replace(/\n/g, '<br>');
        }

        // Initial check
        setTimeout(checkTranslations, 100);
    </script>
</body>
</html>